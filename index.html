<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Obvs by inter8ection</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Obvs</h1>
      <h2 class="project-tagline">An observable ÂµServiceBus .NET library that wraps the complexities of your particular message transport in simple Rx based interfaces. Supports ActiveMQ, NetMQ, and RabbitMQ.</h2>
      <a href="https://github.com/inter8ection/Obvs" class="btn">View on GitHub</a>
      <a href="https://github.com/inter8ection/Obvs/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/inter8ection/Obvs/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why?</h2>

<p>Writing code to connect two processes can involve a lot of boilerplate. Every time you add a new service or message type, you find yourself repeating the same steps. Obvs takes care of this for you, and allows you to start connecting your services with very little code required, so you get more done.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Simple RX based interfaces for doing pub/sub</li>
<li>Convention based messaging over topics/queues per service</li>
<li>Multiplexing of multiple message types over single topics/queues</li>
<li>Dynamic creation of deserializers per type</li>
<li>Asynchronous error handling on a separate channel</li>
<li>Easy to extend and customise, allowing integration with external systems</li>
<li>Fluent code based configuration</li>
<li>Supports ActiveMQ, NetMQ, RabbitMQ transports</li>
<li>Provides serialization for XML, JSON, ProtoBuf, and MsgPack</li>
<li>Provides logging extension points, and support for NLog</li>
</ul>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>All packages can be downloaded from <a href="https://www.nuget.org/packages?q=obvs">NuGet.org</a></p>

<p>Choose a message transport</p>

<pre><code>install-package Obvs.ActiveMQ
</code></pre>

<p>Choose a serialization format</p>

<pre><code>install-package Obvs.Serialization.Json
</code></pre>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<p>Define a root message type to identify messages as belonging to your service:</p>

<pre><code>public interface ITestServiceMessage : IMessage { }
</code></pre>

<p>Create command/event/request/response message types:</p>

<pre><code>public class TestCommand : ITestServiceMessage, ICommand { }

public class TestEvent : ITestServiceMessage, IEvent { }

public class TestRequest: ITestServiceMessage, IRequest { }

public class TestResponse : ITestServiceMessage, IResponse { }
</code></pre>

<p>Create your service bus:</p>

<pre><code>IServiceBus serviceBus = ServiceBus.Configure()
    .WithActiveMQEndpoints&lt;ITestMessage&gt;()
        .Named("Obvs.TestService")
        .UsingQueueFor&lt;ICommand&gt;()
        .ConnectToBroker("tcp://localhost:61616")
        .SerializedAsJson()
        .AsClientAndServer()
    .Create();
</code></pre>

<p>Send commands:</p>

<pre><code>serviceBus.Commands.Subscribe(c =&gt; Console.WriteLine("Received a command!"));
serviceBus.SendAsync(new TestCommand())
</code></pre>

<p>Publish events:</p>

<pre><code>serviceBus.Events.Subscribe(e =&gt; Console.WriteLine("Received an event!"));
serviceBus.PublishAsync(new TestEvent())
</code></pre>

<p>Request/response:</p>

<pre><code>serviceBus.Requests
      .OfType&lt;TestRequest&gt;()
      .Subscribe(request =&gt; serviceBus.ReplyAsync(request, new TestResponse()));

serviceBus.GetResponses(new TestRequest())
      .OfType&lt;TestResponse&gt;()
      .Take(1)
      .Timeout(TimeSpan.FromSeconds(1))
      .Subscribe(r =&gt; Console.WriteLine("Received a response!"), err =&gt; Console.WriteLine("Oh no!"));
</code></pre>

<p>Define custom endpoints that can wrap API calls or integrations with other systems:</p>

<pre><code>public class MyCustomEndpoint : IServiceEndpointClient
    {
        Type _serviceType = typeof(IMyCustomServiceMessage);

        public IObservable&lt;IEvent&gt; Events
        {
                get
                {
                    // subscribe to external MQ broker
                }
        }

        public void Send(ICommand command)
        {
                // call external API
        }

        public IObservable&lt;IResponse&gt; GetResponses(IRequest request)
        {
                // call external API and wrap response in observable
        }

        public bool CanHandle(IMessage message)
        {
                return _serviceType.IsInstanceOfType(message);
        }
    }

...

IServiceBus serviceBus = ServiceBus.Configure()
    .WithActiveMQEndpoints&lt;ITestMessage&gt;()
        .Named("Obvs.TestService")
        .UsingQueueFor&lt;ICommand&gt;()
        .ConnectToBroker("tcp://localhost:61616")
        .SerializedAsJson()
        .AsClientAndServer()
    .WithEndpoints(new MyCustomEndpoint())
    .Create();
</code></pre>

<h2>
<a id="whats-coming" class="anchor" href="#whats-coming" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's coming?</h2>

<p>More transports and a portable core library.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/inter8ection/Obvs">Obvs</a> is maintained by <a href="https://github.com/inter8ection">inter8ection</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-61564782-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

